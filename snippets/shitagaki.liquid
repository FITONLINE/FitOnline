<p>運動やスポーツ別のカロリー消費量を簡単に計算できるツールです。</p>
<p>体重と運動時間を入力するだけで、あなたの消費カロリーを知ることができます。</p>
<p>健康管理や体重管理の参考にぜひご活用ください。</p>
<p class="attention">
  ※このツールは健康管理の参考としてご利用いただくものです。医学的診断や治療に代わるものではありません。
</p>
<h2>カロリー消費量の計算方法</h2>
<p>カロリー消費量は以下の式で計算されます：</p>
<div class="formula">カロリー消費量 = MET値 × 3.5 × 体重(kg) × 運動時間(分) ÷ 200</div>
<p>この計算式では：</p>
<ul>
  <li>MET値は運動の強度を表す数値です</li>
  <li>3.5は、1METが体重1kgあたり毎分3.5mlの酸素消費量に相当することを示します</li>
  <li>体重と運動時間から総カロリー消費量が算出されます</li>
</ul>

<h2>MET値と運動強度の関係</h2>
<p>運動強度はMET値によって以下のように分類されます：</p>
<div class="met-table">
  <table>
    <thead>
      <tr>
        <th>MET値</th>
        <th>強度区分</th>
        <th>活動例</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1.0-2.9</td>
        <td>低強度</td>
        <td>ゆっくり歩く、座って仕事をする、家事（軽い）</td>
      </tr>
      <tr>
        <td>3.0-5.9</td>
        <td>中強度</td>
        <td>普通に歩く、ヨガ、ゴルフ、家事（掃除機をかける）</td>
      </tr>
      <tr>
        <td>6.0-8.9</td>
        <td>高強度</td>
        <td>ジョギング、テニス、水泳、サイクリング（通常）</td>
      </tr>
      <tr>
        <td>9.0以上</td>
        <td>非常に高強度</td>
        <td>ランニング、サッカー（試合）、縄跳び、HIIT</td>
      </tr>
    </tbody>
  </table>
</div>

<blockquote>
  <p>
    MET値は様々な運動を比較するための指標として広く使われていますが、実際のカロリー消費量は個人の年齢、性別、体組成、運動効率などによって変動します。このツールで示される値は目安としてご利用ください。
  </p>
  <cite
    >引用：American College of Sports Medicine (ACSM)<br>
    <a rel="noopener noreferrer" href="https://www.acsm.org/read-research/resource-library" target="_blank"
      >Exercise Intensity Guidelines</a
    ></cite
  >
</blockquote>

<h2>カロリー消費計算の注意点</h2>
<p>このカロリー消費計算ツールは以下の点を考慮していません：</p>
<ul>
  <li>年齢や性別による代謝の違い</li>
  <li>個人の運動効率の差</li>
  <li>心拍数、体温、環境温度などの影響</li>
  <li>体組成（筋肉量と脂肪量の割合）</li>
</ul>
<p>より正確なカロリー消費量を知るためには、心拍数モニターや専門的な測定機器を使用することをお勧めします。</p>
<p>[DIVIDER]ad[/DIVIDER]</p>
<h2>カロリー消費計算ツールの使い方</h2>
<p>
  <span class="bold">MET（Metabolic Equivalent of Task：代謝当量）</span
  >は、運動の強度を表す指標です。安静時の代謝を1METとした場合の何倍のエネルギーを消費するかを示します。
</p>
<p>
  このカロリー消費計算ツールは、あなたの体重と運動時間を入力して運動の種類を選ぶだけで、消費カロリーを即座に計算します。様々な運動やスポーツの消費カロリーを比較することで、効率的な運動計画の参考にすることができます。
</p>
<p>[DIVIDER]ad[/DIVIDER]</p>
<h2>運動・スポーツ別カロリー消費計算</h2>
<div class="calorie-calculator">
  <div class="calculator-form">
    <div class="form-group">
      <label for="weight">体重 (kg)</label>
      <input placeholder="例: 65" max="200" min="30" class="form-control" id="weight" type="number">
    </div>
    <div class="form-group">
      <label for="duration">運動時間 (分)</label>
      <input placeholder="例: 30" max="300" min="5" class="form-control" id="duration" type="number">
    </div>
    <div class="form-group">
      <label for="activity">運動・スポーツの種類</label>
      <select class="form-control" id="activity">
        <option value="">選択してください</option>
        <optgroup label="ウォーキング・ランニング">
          <option value="3.0">ウォーキング (ゆっくり, 3.2km/h)</option>
          <option value="3.5">ウォーキング (通常, 4.8km/h)</option>
          <option value="5.0">ウォーキング (速く, 6.4km/h)</option>
          <option value="6.0">ジョギング (ゆっくり, 8km/h)</option>
          <option value="8.3">ランニング (通常, 9.7km/h)</option>
          <option value="10.0">ランニング (速く, 11.3km/h)</option>
          <option value="13.5">ランニング (非常に速く, 14.5km/h)</option>
        </optgroup>
        <optgroup label="サイクリング">
          <option value="3.5">サイクリング (ゆっくり, 8-9.9km/h)</option>
          <option value="5.8">サイクリング (通常, 16-19km/h)</option>
          <option value="8.0">サイクリング (速く, 19-22km/h)</option>
          <option value="10.0">サイクリング (レース, 22-25.7km/h)</option>
        </optgroup>
        <optgroup label="スイミング">
          <option value="6.0">水泳 (ゆっくり)</option>
          <option value="8.0">水泳 (通常)</option>
          <option value="10.0">水泳 (速く)</option>
          <option value="7.0">水泳 (背泳ぎ)</option>
          <option value="10.0">水泳 (バタフライ)</option>
        </optgroup>
        <optgroup label="球技スポーツ">
          <option value="4.5">バスケットボール (レクリエーション)</option>
          <option value="8.0">バスケットボール (試合)</option>
          <option value="3.0">ゴルフ (カートあり)</option>
          <option value="4.5">ゴルフ (カートなし)</option>
          <option value="7.0">サッカー (レクリエーション)</option>
          <option value="10.0">サッカー (試合)</option>
          <option value="4.0">バレーボール (レクリエーション)</option>
          <option value="8.0">バレーボール (試合)</option>
          <option value="4.5">テニス (ダブルス)</option>
          <option value="8.0">テニス (シングルス)</option>
        </optgroup>
        <optgroup label="フィットネス・トレーニング">
          <option value="3.5">ストレッチング/ヨガ (軽め)</option>
          <option value="4.0">ヨガ (通常)</option>
          <option value="5.0">筋力トレーニング (軽~中程度)</option>
          <option value="6.0">筋力トレーニング (高強度)</option>
          <option value="7.0">エアロビクス (一般)</option>
          <option value="8.5">HIIT (高強度インターバルトレーニング)</option>
          <option value="9.0">縄跳び (一般)</option>
        </optgroup>
        <optgroup label="日常活動">
          <option value="2.0">掃除 (一般)</option>
          <option value="3.5">ガーデニング</option>
          <option value="3.0">階段上り</option>
          <option value="2.0">買い物</option>
          <option value="2.0">子供と遊ぶ (座って)</option>
          <option value="3.5">子供と遊ぶ (立って)</option>
          <option value="5.0">子供と遊ぶ (走って)</option>
        </optgroup>
        <optgroup label="冬のスポーツ">
          <option value="5.0">スキー (ダウンヒル, 一般)</option>
          <option value="7.0">スキー (クロスカントリー)</option>
          <option value="5.5">スケート (一般)</option>
          <option value="7.0">スノーボード</option>
        </optgroup>
      </select>
    </div>
    <div class="form-group">
      <button class="btn btn-primary" id="calculate-button">計算する</button>
      <button class="btn btn-secondary" id="reset-button">リセット</button>
    </div>
  </div>
  <div style="display: none;" class="calculator-results" id="results">
    <p class="bold">あなたのカロリー消費結果</p>
    <div class="results-summary">
      <div class="result-item">
        <div class="result-label">総消費カロリー</div>
        <div class="result-value" id="calories-result">0</div>
        <div class="result-unit">kcal</div>
      </div>
      <div class="result-item">
        <div class="result-label">運動強度 (MET)</div>
        <div class="result-value" id="met-result">0</div>
        <div class="result-unit">METs</div>
      </div>
      <div class="result-item">
        <div class="result-label">1分あたり</div>
        <div class="result-value" id="calories-per-minute">0</div>
        <div class="result-unit">kcal/分</div>
      </div>
    </div>
    <div class="calories-visualization">
      <p class="bold">運動強度スケール</p>
      <div class="met-scale">
        <div id="met-marker" class="met-marker"></div>
        <div class="scale-categories">
          <div class="scale-category very-light">低強度</div>
          <div class="scale-category light">軽強度</div>
          <div class="scale-category moderate">中強度</div>
          <div class="scale-category vigorous">高強度</div>
          <div class="scale-category very-vigorous">非常に高強度</div>
        </div>
        <div class="scale-values">
          <span>1</span> <span>3</span> <span>6</span> <span>9</span> <span>12</span> <span>15</span>
        </div>
      </div>
    </div>
    <div class="activity-comparison">
      <p class="bold">カロリー消費比較</p>
      <div class="calories-chart-container"><canvas id="calories-chart"></canvas></div>
      <div class="comparison-details">
        <div class="comparison-item current">
          <div class="comparison-label">選択した運動</div>
          <div id="current-activity-display" class="comparison-value">-</div>
        </div>
        <div class="comparison-item daily">
          <div class="comparison-label">推定1日消費量の</div>
          <div id="daily-percentage" class="comparison-value">0%</div>
        </div>
      </div>
    </div>
  </div>
</div>
<p>[DIVIDER]ad[/DIVIDER]</p>

<style>
  /* フォームスタイル */
  .calculator-form {
    background-color: #f8f9fa;
    padding: 25px;
    border-radius: 10px;
    margin-bottom: 20px;
  }

  .form-group {
    margin-bottom: 15px;
  }

  .form-control {
    width: 100%;
    padding: 10px;
    border: 1px solid #ced4da;
    border-radius: 5px;
    font-size: 16px;
  }

  label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }

  .btn {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
  }

  .btn-primary {
    background-color: #0066cc;
    color: white;
  }

  .btn-primary:hover {
    background-color: #0056b3;
  }

  .btn-secondary {
    background-color: #6c757d;
    color: white;
    margin-left: 10px;
  }

  .btn-secondary:hover {
    background-color: #5a6268;
  }

  /* 結果表示スタイル */
  .calculator-results {
    background-color: #e9f7fe;
    padding: 25px;
    border-radius: 10px;
  }

  .results-summary {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    flex-wrap: wrap;
  }

  .result-item {
    text-align: center;
    flex: 1;
    min-width: 150px;
    margin: 10px;
    padding: 15px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .result-label {
    font-size: 14px;
    color: #6c757d;
    margin-bottom: 5px;
  }

  .result-value {
    font-size: 24px;
    font-weight: bold;
    color: #0066cc;
  }

  .result-unit {
    font-size: 14px;
    color: #6c757d;
  }

  /* METスケール表示 */
  .calories-visualization {
    margin-top: 30px;
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .met-scale {
    position: relative;
    height: 60px;
    margin: 40px 0 20px;
    background: linear-gradient(to right, #9ed2f5, #41b6ff, #17a2ff, #1488d8, #0f6fa6);
    border-radius: 5px;
  }

  .met-marker {
    position: absolute;
    top: -15px;
    width: 3px;
    height: 30px;
    background-color: #ff0000;
    transform: translateX(-50%);
  }

  .met-marker::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: -5px;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 10px solid #ff0000;
  }

  .scale-categories {
    display: flex;
    width: 100%;
    position: absolute;
    top: -40px;
  }

  .scale-category {
    text-align: center;
    padding: 5px 0;
    font-size: 12px;
    color: white;
  }

  .very-light {
    background-color: #9ed2f5;
    width: 15%;
  }

  .light {
    background-color: #41b6ff;
    width: 20%;
  }

  .moderate {
    background-color: #17a2ff;
    width: 20%;
  }

  .vigorous {
    background-color: #1488d8;
    width: 20%;
  }

  .very-vigorous {
    background-color: #0f6fa6;
    width: 25%;
  }

  .scale-values {
    display: flex;
    justify-content: space-between;
    width: 100%;
    position: absolute;
    bottom: -20px;
  }

  .scale-values span {
    font-size: 12px;
    transform: translateX(-50%);
  }

  .scale-values span:last-child {
    transform: translateX(0);
  }

  /* カロリー比較表示 */
  .activity-comparison {
    margin-top: 30px;
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .calories-chart-container {
    height: 200px;
    margin: 20px 0;
  }

  .comparison-details {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
  }

  .comparison-item {
    text-align: center;
    flex: 1;
    min-width: 120px;
    margin: 10px;
    padding: 10px;
    border-radius: 5px;
  }

  .current {
    background-color: #e0f7fa;
  }

  .daily {
    background-color: #e8f5e9;
  }

  .comparison-label {
    font-size: 14px;
    color: #6c757d;
    margin-bottom: 5px;
  }

  .comparison-value {
    font-size: 18px;
    font-weight: bold;
  }

  /* 計算式と表のスタイル */
  .formula {
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    margin: 20px 0;
  }

  .met-table {
    margin: 20px 0;
    overflow-x: auto;
  }

  .met-table table {
    width: 100%;
    border-collapse: collapse;
  }

  .met-table th,
  .met-table td {
    padding: 10px 15px;
    border: 1px solid #dee2e6;
    text-align: center;
  }

  .met-table th {
    background-color: #e9f7fe;
    font-weight: bold;
  }

  .met-table tr:nth-child(even) {
    background-color: #f8f9fa;
  }

  blockquote {
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
    font-size: 14px;
    margin: 20px 0;
    border-left: 4px solid #41b6ff;
  }

  /* レスポンシブ対応 */
  @media (max-width: 768px) {
    .results-summary,
    .comparison-details {
      flex-direction: column;
    }

    .result-item,
    .comparison-item {
      margin-bottom: 15px;
    }

    .met-scale {
      height: 40px;
    }

    .scale-categories {
      flex-wrap: wrap;
      top: -60px;
    }

    .scale-category {
      font-size: 10px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // DOM要素の取得
    const weightInput = document.getElementById('weight');
    const durationInput = document.getElementById('duration');
    const activitySelect = document.getElementById('activity');
    const calculateButton = document.getElementById('calculate-button');
    const resetButton = document.getElementById('reset-button');
    const resultsDiv = document.getElementById('results');
    const caloriesResult = document.getElementById('calories-result');
    const metResult = document.getElementById('met-result');
    const caloriesPerMinute = document.getElementById('calories-per-minute');
    const metMarker = document.getElementById('met-marker');
    const currentActivityDisplay = document.getElementById('current-activity-display');
    const dailyPercentage = document.getElementById('daily-percentage');

    // グラフ描画用の変数
    let caloriesChart;

    // カロリー計算関数
    function calculateCalories(weight, duration, met) {
      // カロリー計算式: METs x 3.5 x 体重(kg) x 時間(分) / 200
      return (met * 3.5 * weight * duration) / 200;
    }

    // METマーカーの位置設定関数
    function setMETMarkerPosition(met) {
      // METスケールの幅に応じてマーカー位置を計算
      // MET 1〜15の範囲（幅14）を100%に対応させる
      let position;
      if (met < 1) {
        position = 0;
      } else if (met > 15) {
        position = 100;
      } else {
        position = ((met - 1) / 14) * 100;
      }
      metMarker.style.left = `${position}%`;
    }

    // グラフ描画関数
    function renderCaloriesChart(calories) {
      const ctx = document.getElementById('calories-chart').getContext('2d');

      // 既存のグラフがあれば破棄
      if (caloriesChart) {
        caloriesChart.destroy();
      }

      // 推定1日消費カロリーの参考値（体重×30kcal）
      const estimatedDailyCalories = weightInput.value * 30;
      const percentage = ((calories / estimatedDailyCalories) * 100).toFixed(1);

      // 1日の推定消費カロリーに対する割合を表示
      dailyPercentage.textContent = `${percentage}%`;

      // 新しいグラフを作成
      caloriesChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['選択した運動', '推定1日消費量'],
          datasets: [
            {
              data: [calories, estimatedDailyCalories],
              backgroundColor: ['#41B6FF', '#4CAF50'],
              borderWidth: 0,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'カロリー (kcal)',
              },
            },
          },
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              callbacks: {
                label: function (context) {
                  return context.parsed.y.toFixed(1) + ' kcal';
                },
              },
            },
          },
        },
      });
    }

    // 運動名を取得する関数
    function getSelectedActivityName() {
      const selectedOption = activitySelect.options[activitySelect.selectedIndex];
      return selectedOption.text;
    }

    // 計算ボタンのクリックイベント
    calculateButton.addEventListener('click', function () {
      // 入力値の取得
      const weight = parseFloat(weightInput.value);
      const duration = parseFloat(durationInput.value);
      const met = parseFloat(activitySelect.value);

      // 入力バリデーション
      if (isNaN(weight) || isNaN(duration) || isNaN(met) || weight <= 0 || duration <= 0 || met <= 0) {
        alert('有効な体重、運動時間、運動の種類を入力してください');
        return;
      }

      // カロリー計算
      const totalCalories = calculateCalories(weight, duration, met);
      const caloriesPerMin = totalCalories / duration;

      // 結果表示の更新
      caloriesResult.textContent = totalCalories.toFixed(1);
      metResult.textContent = met.toFixed(1);
      caloriesPerMinute.textContent = caloriesPerMin.toFixed(1);

      // METマーカーの位置設定
      setMETMarkerPosition(met);

      // 選択した運動名を表示
      currentActivityDisplay.textContent = getSelectedActivityName();

      // グラフを描画
      renderCaloriesChart(totalCalories);

      // 結果セクションを表示
      resultsDiv.style.display = 'block';
    });

    // リセットボタンのクリックイベント
    resetButton.addEventListener('click', function () {
      // 入力フィールドをリセット
      weightInput.value = '';
      durationInput.value = '';
      activitySelect.selectedIndex = 0;

      // 結果セクションを非表示
      resultsDiv.style.display = 'none';

      // グラフがあれば破棄
      if (caloriesChart) {
        caloriesChart.destroy();
        caloriesChart = null;
      }
    });
  });
</script>

<!-- Chart.jsを読み込み -->
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
